<!DOCTYPE html>
<html>
  <head>
    <title>Tic Rack Toe</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.5.0/pure-min.css">
    <link rel="stylesheet" href="/css/tictactoe.css">
    <% if game_is_ready %>
      <meta http-equiv="refresh" content="0;URL=/game/play">
    <% end %>
  </head>

  <body>
    <header>
      <h1><a href="/">Tic Rack Toe</a></h1>
    </header>

    <main>
      <table class="pure-table pure-table-bordered">
        <% board.rows.flatten.each_slice(board.size).each_with_index do |row, row_index| %>
          <tr>
            <% row.each_with_index do |cell, cell_index| %>
              <% move_index = cell_index + (row_index * board.size) + 1 %>
              <td class="<%= cell %>">
                <% if cell %>
                  <%= cell %>
                <% elsif game_is_ongoing && !game_is_ready %>
                  <a href="/game/play?move=<%= move_index %>">&nbsp;</a>
                <% end %>
              </td>
            <% end %>
          </tr>
        <% end %>
      </table>
      <div class="pure-g">
        <div class="pure-u-1">
          <p class="status"><%= @status %></p>
        </div>
      </div>
    </main>

    <footer>
      <div class="pure-g">
        <div class="pure-u-1-2"><a class="pure-button" href="/">Back</a></div>
        <div class="pure-u-1-2"><a class="pure-button" href="/game/restart">Restart Game</a></div>
      </div>
    </footer>
  </body>
</html>
